/*!
 MIT License
 Copyright (c) 2013 sprd.net AG - Tony Findeisen
 https://github.com/spreadshirt/apps/blob/gh-pages/LICENSE
 */
!function(a,b){function c(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")&&parseInt(a.split("msie")[1])}function d(b,c){var d=new XMLHttpRequest,e="NA"===c.platform?"com":"net",f="";try{f="&options="+encodeURIComponent(JSON.stringify(c))}catch(a){console.error(a)}var g="https://designer.spreadshirt."+e+"/tracking/integrations?type="+encodeURIComponent(b)+"&host="+encodeURIComponent(a.location.host)+f;d.open("GET",g,!0),d.send(null)}function e(a){var b=Array.prototype.slice.call(arguments);if(b.length>1)for(var c=1;c<b.length;c++){var d=b[c];for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a}function f(a){for(var b=1;b<arguments.length;b++){a=a||{};var c=arguments[b]||{};for(var d in c)c.hasOwnProperty(d)&&void 0===a[d]&&void 0!==c[d]&&null!==c[d]&&(a[d]=c[d])}return a}function g(a){for(var b=location.search.replace(/^\?/,"").split("&"),c=0;c<b.length;c++){var d=b[c].split("=");a.hasOwnProperty(d[0])&&d[1]&&(a[d[0]]=decodeURIComponent(d[1]))}}function h(a,b,c){function d(a){var c=q?JSON.parse(a.data):a.data,d=c.messageId,e=f[d];e&&a.source===b.contentWindow&&(delete f[d],e&&e(c.error,c.data))}c=c||"*";var e=0,f={};return a.addEventListener?a.addEventListener("message",d,!1):a.attachEvent("onmessage",d),{call:function(a,d,g){var h=++e;f[h]=g;var i={messageId:h,method:a,data:d};q&&(i=JSON.stringify(i)),b.contentWindow.postMessage(i,c)}}}function i(a){}function j(c,i,j,k){function l(){y||(y=!0,s=s||new h(a,o),s.call("bootStrap",i,function(a,b){var c;if(!a&&b){c={};for(var d=0;d<b.length;d++)!function(a){c[a]=function(){var b=Array.prototype.slice.call(arguments),c=b.pop();"[object Function]"!==Object.prototype.toString.call(c)&&(b.push(c),c=null);try{s.call("invokeExternalMethod",{method:a,params:b},function(a,b){b=b||[],b.unshift(a),c&&c.apply(this,b)})}catch(a){c&&c(a)}}}(b[d])}v(a,c)}))}function m(a){if(a.source===o.contentWindow){var b=a.data;if("initialized"===b)x=!0,r&&clearTimeout(r),l();else{b=q?JSON.parse(b):b;var c=b.method,d=w[c];if(d){var e=b.data;e.push(function(c){var d=Array.prototype.slice.call(arguments)||[];d.shift();var e={messageId:b.messageId,error:c,data:d};return q&&(e=JSON.stringify(e)),a.source.postMessage(e,"*")}),d.apply(this,e)}}}}var n,o,r,s,t,u=!1,v=function(a,b){u||(u=!0,k&&k(a,b))},w={},x=!1,y=!1,z=c.indexOf("?")>-1;if(i=e({platform:"EU",target:b.body||b.getElementsByTagName("body")[0],width:"100%",height:"700px",parseDeeplinks:!1},i),n="NA"===i.platform?"NA":"EU",i.shopId=i.shopId||("EU"===n?205909:93439),i=e(i,{mode:"partner"===i.mode?"partner":"external",contextId:i.shopId,context:"shop"}),i.parseDeeplinks){for(var A={},B=0;B<p.length;B++)A[p[B]]=null;g(A),f(i,A)}t=i.shopId,delete i.shopId;for(var C in i)i.hasOwnProperty(C)&&i[C]instanceof Function&&(w[C+"Proxy"]=i[C],i[C]=C+"Proxy");"file:"===a.location.protocol&&/^\/{2}/.test(c)&&(c="http:"+c),c=c.replace(/^file/i,"http"),t&&(z?c+="&shopId="+t:(c+="?shopId="+t,z=!0)),i.version&&(z?c+="&version="+i.version:(c+="?version="+i.version,z=!0)),a.addEventListener?a.addEventListener("message",m,!1):a.attachEvent("onmessage",m),o=b.createElement("iframe"),o.id=j,o.onload=function(){x?l():r=setTimeout(function(){v(new Error("Initialisation took too long"))},1e3)},o.setAttribute("width",i.width),o.setAttribute("height",i.height),o.setAttribute("style","border: 0"),o.setAttribute("allowpaymentrequest",""),o.setAttribute("allowfullscreen",""),o.src=c,i.target.appendChild(o),delete i.target,d(j,i)}function k(a,b){var c;c="//designer.spreadshirt."+("EU"==("NA"===a.platform?"NA":"EU")?"net":"com")+"/designers/tablomat?mode=external",a.url&&(c=a.url),a.shopId=""+(a.shopId||""),j.prototype.constructor.call(this,c,a,"tablomat",b)}function l(a,b){var c;c="//designer.spreadshirt."+("EU"==("NA"===a.platform?"NA":"EU")?"net":"com")+"/designers/sketchomat?mode=external",a.url&&(c=a.url),a.shopId=""+(a.shopId||""),j.prototype.constructor.call(this,c,a,"sketchomat",b)}function m(a,b){var c;c="//designer.spreadshirt."+("EU"==("NA"===a.platform?"NA":"EU")?"net":"com")+"/designers/smartomat?mode=external",a.url&&(c=a.url),a.shopId=""+(a.shopId||""),j.prototype.constructor.call(this,c,a,"smartomat",b)}var n=a.spreadshirt=a.spreadshirt||{},o={tablomat:k,sketchomat:l,smartomat:m},p=["designUrl","designId","designColor1","designColor2","designColor3","designColorRgb1","designColorRgb2","designColorRgb3","articleId","productId","appearanceId","sizeId","quantity","viewId","productTypeId","tx1","tx2","tx3","textColorRgb","textColor","departmentId","productTypeCategoryId","designCategoryId","designSearch","perspective","mode","panel","basketId","basketItemId","editBasketItemUrl","shareUrlTemplate","hideVolumeDiscount","whiteLabeled"],q=c();q=q&&q<=9,Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b,c,d=Object(this),e=d.length>>>0;if(0===e)return-1;if(b=0,arguments.length>1&&(b=Number(arguments[1]),b!=b?b=0:0!=b&&b!=1/0&&b!=-1/0&&(b=(b>0||-1)*Math.floor(Math.abs(b)))),b>=e)return-1;for(c=b>=0?b:Math.max(e-Math.abs(b),0);c<e;c++)if(c in d&&d[c]===a)return c;return-1}),n.create=function(a,b,c){b=b||{},c=c||function(){};var d=o[a];if(!d)return c(new Error("Application from type '"+a+"' not found"));new d(b,c)},n.buy=function(c,d){c=c||{},d=d||function(){};var e="NA"===c.platform?"NA":"EU";f(c,{url:"//checkout.spreadshirt."+("EU"===e?"net":"com")+"/buy"});var g=b.createElement("iframe");g.id="buy",g.onload=function(){new h(a,g,"*").call("checkout",c,d)},g.onerror=d,g.setAttribute("style","border: 0 none; width: 0; height: 0; visibility: hidden;"),g.setAttribute("allowpaymentrequest",""),g.src=c.url,b.getElementsByTagName("body")[0].appendChild(g)},n.buy.isSupported=function(){return!!a.PaymentRequest},k.prototype=new i,k.prototype.constructor=k;var r=a.spreadshirtLoaded;if(r&&r instanceof Function&&(r=[r]),r instanceof Array)for(var s=0;s<r.length;s++)try{r[s](n)}catch(a){}}(window,document);