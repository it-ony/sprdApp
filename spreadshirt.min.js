/*!
 MIT License
 Copyright (c) 2013 sprd.net AG - Tony Findeisen
 https://github.com/spreadshirt/apps/blob/gh-pages/LICENSE
 */
!function(a,b){function c(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")&&parseInt(a.split("msie")[1])}function d(b,c){var d=new XMLHttpRequest,e="NA"===c.platform?"com":"net",f="https://designer.spreadshirt."+e+"/tracking/integrations?type="+encodeURIComponent(b)+"&host="+encodeURIComponent(a.location.host)+"&options="+encodeURIComponent(JSON.stringify(c));d.open("GET",f,!0),d.send(null)}function e(a){var b=Array.prototype.slice.call(arguments);if(b.length>1)for(var c=1;c<b.length;c++){var d=b[c];for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a}function f(a){for(var b=1;b<arguments.length;b++){a=a||{};var c=arguments[b]||{};for(var d in c)c.hasOwnProperty(d)&&void 0===a[d]&&void 0!==c[d]&&null!==c[d]&&(a[d]=c[d])}return a}function g(a){for(var b=location.search.replace(/^\?/,"").split("&"),c=0;c<b.length;c++){var d=b[c].split("=");a.hasOwnProperty(d[0])&&d[1]&&(a[d[0]]=decodeURIComponent(d[1]))}}function h(a,b,c){function d(a){var c=t?JSON.parse(a.data):a.data,d=c.messageId,e=f[d];e&&a.source===b.contentWindow&&(delete f[d],e&&e(c.error,c.data))}c=c||"*";var e=0,f={};return a.addEventListener?a.addEventListener("message",d,!1):a.attachEvent("onmessage",d),{call:function(a,d,g){var h=++e;f[h]=g;var i={messageId:h,method:a,data:d};t&&(i=JSON.stringify(i)),b.contentWindow.postMessage(i,c)}}}function i(a){}function j(c,d,i,j){function k(){x||(x=!0,p=p||new h(a,n),p.call("bootStrap",d,function(a,b){var c;if(!a&&b){c={};for(var d=0;d<b.length;d++)!function(a){c[a]=function(){var b=Array.prototype.slice.call(arguments),c=b.pop();"[object Function]"!==Object.prototype.toString.call(c)&&(b.push(c),c=null);try{p.call("invokeExternalMethod",{method:a,params:b},function(a,b){b=b||[],b.unshift(a),c&&c.apply(this,b)})}catch(a){c&&c(a)}}}(b[d])}u(a,c)}))}function l(a){if(a.source===n.contentWindow){var b=a.data;if("initialized"===b)w=!0,o&&clearTimeout(o),k();else{b=t?JSON.parse(b):b;var c=b.method,d=v[c];if(d){var e=b.data;e.push(function(c){var d=Array.prototype.slice.call(arguments)||[];d.shift();var e={messageId:b.messageId,error:c,data:d};return t&&(e=JSON.stringify(e)),a.source.postMessage(e,"*")}),d.apply(this,e)}}}}var m,n,o,p,q,r=!1,u=function(a,b){r||(r=!0,j&&j(a,b))},v={},w=!1,x=!1,y=!1;if(d=e({platform:"EU",target:b.body||b.getElementsByTagName("body")[0],width:"100%",height:"700px",parseDeeplinks:!1},d),m="NA"===d.platform?"NA":"EU",d.shopId=d.shopId||("EU"===m?205909:93439),d=e(d,{mode:"partner"===d.mode?"partner":"external",contextId:d.shopId,context:"shop"}),d.parseDeeplinks){for(var z={},A=0;A<s.length;A++)z[s[A]]=null;g(z),f(d,z)}q=d.shopId,delete d.shopId;for(var B in d)d.hasOwnProperty(B)&&d[B]instanceof Function&&(v[B+"Proxy"]=d[B],d[B]=B+"Proxy");"file:"===a.location.protocol&&/^\/{2}/.test(c)&&(c="http:"+c),c=c.replace(/^file/i,"http"),q&&(c+="?shopId="+q,y=!0),d.version&&(c+=(y?"&":"?")+"version="+d.version),a.addEventListener?a.addEventListener("message",l,!1):a.attachEvent("onmessage",l),n=b.createElement("iframe"),n.id=i,n.onload=function(){w?k():o=setTimeout(function(){u(new Error("Initialisation took too long"))},1e3)},n.setAttribute("width",d.width),n.setAttribute("height",d.height),n.setAttribute("style","border: 0"),n.setAttribute("allowpaymentrequest",""),n.setAttribute("allowfullscreen",""),n.src=c,d.target.appendChild(n),delete d.target}function k(a,b){var c;c="//www.spreadshirt."+("EU"==("NA"===a.platform?"NA":"EU")?"net":"com")+"/df/DF/Tablomat/Index/external",a.url&&(c=a.url),a.shopId=""+(a.shopId||""),j.prototype.constructor.call(this,c,a,"tablomat",b)}function l(a,b){var c;c="//www.spreadshirt."+("EU"==("NA"===a.platform?"NA":"EU")?"net":"com")+"/df/DF/Tablomat/Index/sketchomat/mode/external",a.url&&(c=a.url),a.shopId=""+(a.shopId||""),j.prototype.constructor.call(this,c,a,"sketchomat",b)}function m(a,b){var c;c="//www.spreadshirt."+("EU"==("NA"===a.platform?"NA":"EU")?"net":"com")+"/df/DF/Tablomat/Index/smartomat/mode/external",a.url&&(c=a.url),a.shopId=""+(a.shopId||""),j.prototype.constructor.call(this,c,a,"smartomat",b)}function n(b,c){var d,e="NA"===b.platform?"NA":"EU",f="EU"===e?"DE":"US",g=a.navigator.language||"en";g=g.split("-")[0],-1===r[e].indexOf(g)&&(g="en"),"NA"===e&&"en"===g&&(g="us"),d="//www.spreadshirt."+("EU"===e?"net":"com")+"/"+g+"/"+f+"/Productomat/Index",b.url&&(d=b.url),j.prototype.constructor.call(this,d,b,"productomat",c)}function o(b,c){var d,e="NA"===b.platform?"NA":"EU",f="EU"===e?"DE":"US",g=a.navigator.language||"en";g=g.split("-")[0],-1===r[e].indexOf(g)&&(g="en"),"NA"===e&&"en"===g&&(g="us"),d="//www.spreadshirt."+("EU"===e?"net":"com")+"/"+g+"/"+f+"/Shop5/Index/external",b.url&&(d=b.url),b.country=b.country||f,b.language=b.language||g,j.prototype.constructor.call(this,d,b,"shop",c)}var p=a.spreadshirt=a.spreadshirt||{},q={tablomat:k,productomat:n,shop:o,sketchomat:l,smartomat:m},r={NA:["en","fr"],EU:["de","dk","pl","fi","en","fr","es","nl","it","no","se"]},s=["designUrl","designId","designColor1","designColor2","designColor3","designColorRgb1","designColorRgb2","designColorRgb3","articleId","productId","appearanceId","sizeId","quantity","viewId","productTypeId","tx1","tx2","tx3","textColorRgb","textColor","departmentId","productTypeCategoryId","designCategoryId","designSearch","perspective","mode","panel","basketId","basketItemId","editBasketItemUrl","shareUrlTemplate","hideVolumeDiscount","whiteLabeled"],t=c();t=t&&t<=9,Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b,c,d=Object(this),e=d.length>>>0;if(0===e)return-1;if(b=0,arguments.length>1&&(b=Number(arguments[1]),b!=b?b=0:0!=b&&b!=1/0&&b!=-1/0&&(b=(b>0||-1)*Math.floor(Math.abs(b)))),b>=e)return-1;for(c=b>=0?b:Math.max(e-Math.abs(b),0);c<e;c++)if(c in d&&d[c]===a)return c;return-1}),p.create=function(a,b,c){b=b||{},c=c||function(){};var e=q[a];if(!e)return c(new Error("Application from type '"+a+"' not found"));d(a,b),new e(b,c)},p.buy=function(c,d){c=c||{},d=d||function(){};var e="NA"===c.platform?"NA":"EU";f(c,{url:"//checkout.spreadshirt."+("EU"===e?"net":"com")+"/buy"});var g=b.createElement("iframe");g.id="buy",g.onload=function(){new h(a,g,"*").call("checkout",c,d)},g.onerror=d,g.setAttribute("style","border: 0 none; width: 0; height: 0; visibility: hidden;"),g.setAttribute("allowpaymentrequest",""),g.src=c.url,b.getElementsByTagName("body")[0].appendChild(g)},p.buy.isSupported=function(){return!!a.PaymentRequest},k.prototype=new i,k.prototype.constructor=k;var u=a.spreadshirtLoaded;if(u&&u instanceof Function&&(u=[u]),u instanceof Array)for(var v=0;v<u.length;v++)try{u[v](p)}catch(a){}}(window,document);